// Ajatix Image/Banner Rotator
// Copyright (C) 2011-2013 Ajatix. All rights reserved.
// http://www.ajatix.com
// Unregistered copy.
// Any usage except for the purpose of evaluation is strictly prohibited.
(function(){var d=document, de=d.documentElement;function createDiv(id, parent){var div=d.createElement('div');if(id!='')div.id=id;parent.appendChild(div);return div;}function onLoad(){var hasTouch=('ontouchstart' in window||window.navigator.msMaxTouchPoints);var listIR=new Array();var bResizing=false;var resizingTimer=null;var sTouch=-1;var eTouch=-1;var startUl;var on='AJXIRVCacETB';function showPics(id,num){var m=listIR[id];if(m.n===num)return true;if(m.ncur!=-1){StopAnimation(m);prepareSlide(m, m.imgs[num].src);}m.n=num;if(m.ncur!=-1){if(!m.animating){hideCaption(m, true,function(){m.slidediv.style.display='block';showSlide(m);});}}else{SetCurDataCap(m);showCaption(m, true);ShowArrows(m);}m.ncur=num;};function showCaption(m, a, f){if(m.curcapa.innerHTML==''){if(f)f();return;}m.curcapdiv.style.display='block';if(a==true){moveTo([[m.curcapdiv,{bottom:0}]], 500,f);}else{m.curcapdiv.style.bottom='0px';}}function hideCaption(m, a, f){if(a==true){moveTo([[m.curcapdiv,{bottom:-20}]],500,f);}else{m.curcapdiv.style.bottom=-20+'px';}}function SetCurDataCap(o){var itm=o.imgs[o.n];o.curcaprich.style.display=(itm.rc?'block':'none');o.curcapa.style.display=(itm.rc?'none':'block');if(itm.rc){o.curcaprich.innerHTML=itm.alt;}else{o.curcapa.href=itm.link;o.curcapa.innerHTML=itm.alt;o.curcapa.target=itm.target;}}function SetCurDataDiv(o){if(o.imgs.length>0){var itm=o.imgs[o.n==-1?0:o.n];o.curimg.src=itm.src;o.cura.href=itm.link;o.cura.target=itm.target;}}function SetCurSlide(o){if(o.imgs.length>0){var n=(o.n==-1?0:o.n);var is=o.slideimgs;is[1].src=o.imgs[n].src;is[1].iN=n;var np=n, nn=n;if(n>0){np=n-1;}else{np=o.imgs.length-1;}if(n<o.imgs.length-1){nn=n+1;}else{nn=0;}is[0].src=o.imgs[np].src;is[0].iN=np;is[2].src=o.imgs[nn].src;is[2].iN=nn;o.slidediv.style.left=-o.divw.offsetWidth+'px';}}function StopAnimation(m){if(m.animating){if(m.slidediv.mtimer)clearInterval(m.slidediv.mtimer);SetCurDataDiv(m);m.animating=false;SetCurDataCap(m);}}function autoShow(){for(var id in listIR){var m=listIR[id];autoShowOne(m);}}function autoShowOne(m){if(m.n==m.liPics.length-1){m.n=-1;}var iN=m.n+1;if(iN<=m.liPics.length-1){unselBtn(m.id);m.liBtn[iN].className='current';if(m.Cvis<m.liBtn.length){var Pos=(iN)*22+parseInt(m.ulBtn.style.left);var End=(m.Cvis-1)*22;if(Pos<0){moveTo([[m.ulBtn,{left:parseInt(m.ulBtn.style.left)-Pos}]], 200, function(){ShowArrows(m);});}else if(Pos>End){moveTo([[m.ulBtn,{left:parseInt(m.ulBtn.style.left)-(Pos-End)}]], 200, function(){ShowArrows(m);});}}showPics(m.id,iN);}}function createNavigationBar(o, div){o.btndiv=createDiv('', div);o.btndiv.className=on+'btn '+on+'clearfix';var s='<ul>';for(var l=0;l<cnt;l++){s+='<li>'+'</li>'}s+='</ul>';o.btndiv.innerHTML=s;var newHTML='<div class="'+on+'left"></div><div class="'+on+'navpics">'+o.btndiv.innerHTML+'</div><div class="'+on+'right"></div>';o.btndiv.innerHTML=newHTML;o.ulBtn=o.btndiv.getElementsByTagName('ul')[0];o.liBtn=o.ulBtn.getElementsByTagName('li');o.btnpicdiv=getElementsByClassName(o.btndiv, 'div', on+'navpics')[0];var s=o.ulBtn.style;s.position='relative';s.left='0px';s.width=o.liBtn.length*22+'px';var dvs=o.btndiv.getElementsByTagName('div');for(var k=0;k<dvs.length;++k){if(dvs[k].className==on+'right'){o.arr=dvs[k];dvs[k].obj=o;function evntAR(e){var o=this.obj;var evt=e||window.event;evt.stopPropagation?evt.stopPropagation():evt.cancelBubble=true;var wh=parseInt(o.ulBtn.style.width)-(parseInt(o.ulBtn.style.left)*(-1)+o.Cvis*22);moveTo([[o.ulBtn,{left:parseInt(o.ulBtn.style.left)-Math.min(((o.Cvis==1)?1:(o.Cvis-1))*22, wh)}]], 500, function(){ShowArrows(o);});return false;}if(hasTouch){dvs[k].ontouchstart=evntAR;}else{dvs[k].onmouseover=evntAR;dvs[k].onclick=evntAR;}}else if(dvs[k].className==on+'left'){o.arl=dvs[k];dvs[k].obj=o;function evntAL(e){var o=this.obj;var evt=e||window.event;evt.stopPropagation?evt.stopPropagation():evt.cancelBubble=true;var wh=parseInt(o.ulBtn.style.left)*(-1);moveTo([[o.ulBtn,{left:parseInt(o.ulBtn.style.left)+Math.min(((o.Cvis==1)?1:(o.Cvis-1))*22, wh)}]], 500, function(){ShowArrows(o);});return false;}if(hasTouch){dvs[k].ontouchstart=evntAL;}else{dvs[k].onmouseover=evntAL;dvs[k].onclick=evntAL;}}}function evntBtn(e){var o=this;if(hasTouch){stopAutoplay(o._id);}var evt=e||window.event;if(hasTouch){evt.stopPropagation?evt.stopPropagation():evt.cancelBubble=true;}if(this.className=='current')return false;o.timer_s=setTimeout(function(){unselBtn(o._id);o.className='current';showPics(o._id,o.I);if(hasTouch){startAutoplay(o._id);}},(hasTouch?0:300));return false;};for(var k=0;k<o.liBtn.length;k++){o.liBtn[k].I=k;o.liBtn[k]._id=o.id;if(hasTouch){o.liBtn[k].ontouchstart=evntBtn;}else{o.liBtn[k].onmouseover=evntBtn;}if(!hasTouch){o.liBtn[k].onmouseout=function(){if(this.timer_s)clearTimeout(this.timer_s);};}}}function showNavigationBar(m){var bShowScroll=(m.liBtn.length>GetCountVisabledBtn(m, false));m.Cvis=GetCountVisabledBtn(m, bShowScroll);var Wbtn=m.Cvis*22;m.btnpicdiv.style.width=Wbtn+'px';var Wbar=Wbtn+(bShowScroll?32:0)+4;var k=m.divw.offsetWidth/960;m.btndiv.style.left=Math.round(5*k)+'px';m.arr.style.display=(bShowScroll?'block':'none');m.arl.style.display=(bShowScroll?'block':'none');showBtns(m);}function GetNavOffset(m){return Math.round(5*m.divw.offsetWidth/960);}function GetCountVisabledBtn(m, bSS){return Math.min(Math.floor((m.divw.offsetWidth-GetNavOffset(m)-(bSS?(16+16):0)-4)/22),m.liBtn.length);}function showBtns(m){var n=(m.ncur==-1?0:m.ncur);var minX=-n;var maxX=m.Cvis-1-n;maxX=(maxX>0?0:maxX);minX=Math.max(minX,m.Cvis-m.liBtn.length);var rx=parseInt(m.ulBtn.style.left);if(rx<(minX*22)||rx>(maxX*22)){var x=((maxX-minX)>2?minX+1:minX);m.ulBtn.style.left=x*22+'px';}}function createSliderElements(m){m.animating=false;m.divpics=getElementsByClassName(m.divw, 'div', on+'pics')[0];m.curdiv=d.createElement('div');m.curdiv.className=on+'curdiv';m.curdiv.style.display='none';m.cura=d.createElement('a');m.cura.className=on+'cura';m.curimg=d.createElement('img');m.curimg.className=on+'curimg';m.curimg._id=m.id;m.cura.appendChild(m.curimg);m.curdiv.appendChild(m.cura);m.divbtnwrap=d.createElement('div');m.divbtnwrap.className=on+'btnwrap';m.divw.appendChild(m.divbtnwrap);m.curcapdiv=d.createElement('div');m.curcapdiv.className=on+'curcapdiv';m.curcapdiv.style.bottom='-20px';var span=d.createElement('span');span.className=on+'curspan';span.style.filter='alpha(opacity=30)';span.style.opacity='0.30';m.curcapa=d.createElement('a');m.curcapa.className=on+'curcapa';m.curcaprich=d.createElement('div');m.curcaprich.className=on+'curcapa';m.curcapdiv.appendChild(span);m.curcapdiv.appendChild(m.curcapa);m.curcapdiv.appendChild(m.curcaprich);m.curdiv.appendChild(m.curcapdiv);m.divpics.appendChild(m.curdiv);m.slidediv=d.createElement('div');m.slidediv.className=on+'slidediv '+on+'clearfix';m.slideimgs=new Array();for(var j=0;j<3;++j){m.slideimgs[j]=d.createElement('img');m.slideimgs[j].className=on+'slideimg';m.slidediv.appendChild(m.slideimgs[j]);}m.slidediv.style.display='none';m.divpics.appendChild(m.slidediv);m.curimg.onload=function(){var m=listIR[this._id];m.slidediv.style.display='none';if(m.divf)m.divf.style.display='none';SetCurSlide(m);};m.dir=0;m.p=1;m.d=0;createNavigationBar(m, m.divbtnwrap);SetSizes(m);SetCurDataDiv(m);}function ShowArrows(m){if(m.arr){m.arr.className=on+'right'+(parseInt(m.ulBtn.style.left)<=(m.Cvis-m.liPics.length)*22?' '+on+'rightd':'');}if(m.arl){m.arl.className=on+'left'+(parseInt(m.ulBtn.style.left)==0?' '+on+'leftd':'');}}function showSlide(m){m.animating=true;moveTo([[m.slidediv,{left:(m.dir==0?0:-2*m.divpics.offsetWidth)}]], 1000, function(){SetCurDataDiv(m);SetCurDataCap(m);showCaption(m,true);m.animating=false;});}function prepareSlide(o, img){o.slidediv.style.left=-o.divpics.offsetWidth+'px';o.slideimgs[o.dir==0?0:2].src=img;}function unselBtn(id){for(var k=0;k<listIR[id].liBtn.length;k++){listIR[id].liBtn[k].className='';}}var divs=getElementsByClassName(d, 'div', on);for(var i=0;i<divs.length;i++){var obj=new Object;obj.autoT=null;obj.n=-1;obj.ncur=-1;obj.id='id'+i;divs[i]._id=obj.id;obj.divw=divs[i];obj.liPics=new Array();obj.imgs=new Array();obj.ulPics=getElementsByClassName(divs[i],'ul', on+'ul')[0];{var liPics=obj.ulPics.getElementsByTagName('li');var iLi=0;for(var j=0;j<liPics.length;j++){if(liPics[j].className.indexOf(on+'li')>=0){obj.liPics[iLi++]=liPics[j];}}}var cnt=obj.liPics.length;for(var j=0;j<cnt;j++){var itm=new Object();var a=obj.liPics[j].getElementsByTagName('a')[0];itm.link=a.href;var img=obj.liPics[j].getElementsByTagName('img')[0];itm.src=img.src;itm.alt=img.alt;itm.target=a.target;itm.rc=false;obj.imgs[j]=itm;}for(var j=0;j<cnt;j++){var cdivs=obj.liPics[j].getElementsByTagName('div');if(cdivs.length>0&&cdivs[0].className.indexOf('richCaption')!=-1){obj.imgs[j].rc=true;obj.imgs[j].alt=cdivs[0].innerHTML;}}listIR[obj.id]=obj;if(!hasTouch){divs[i].onmouseover=function(){stopAutoplay(this._id);};divs[i].onmouseout=function(){startAutoplay(this._id);};}if(hasTouch){var evt=window.navigator.msPointerEnabled ? 'MSPointerDown':'touchstart';addEventListener(divs[i], evt, StartTouch);evt=window.navigator.msPointerEnabled ? 'MSPointerUp':'touchend';addEventListener(divs[i], evt, EndTouch);evt=window.navigator.msPointerEnabled ? 'MSPointerMove':'touchmove';addEventListener(divs[i], evt, MoveTouch);}}addEventListener(window, 'resize', ResizeAll);addEventListener(window, 'pagehide', StartPlayAll);initShow();function initShow(){for(var id in listIR){var m=listIR[id];if(m.imgs.length>0){m.testimg=d.createElement('img');m.testimg.obj=m;m.testimg.onload=function(){var m=this.obj;createSliderElements(m);m.curdiv.style.display='block';autoShowOne(m);startAutoplay(m.id);};m.testimg.src=m.imgs[0].src;}}}function SetSizes(m){StopAnimation(m);m.curimg.style.width=m.divpics.offsetWidth+'px';m.curimg.style.height=m.divpics.offsetHeight+'px';m.slidediv.style.height=m.divpics.offsetHeight+'px';m.slidediv.style.width=m.divpics.offsetWidth*3+'px';for(var i=0;i<3;++i){m.slideimgs[i].style.height=m.divpics.offsetHeight+'px';m.slideimgs[i].style.width=m.divpics.offsetWidth+'px';}showNavigationBar(m);}function ResizeAll(){for(var id in listIR){stopAutoplay(id);}if(bResizing){if(resizingTimer!=null){clearTimeout(resizingTimer);}resizingTimer=setTimeout(ResizeAll, 200);return;}bResizing=true;for(var id in listIR){var m=listIR[id];SetSizes(m);startAutoplay(id);}bResizing=false;}function stopAutoplay(id){var m=listIR[id];if(m.autoT!=null){clearInterval(m.autoT);m.autoT=null;}}function startAutoplay(id){var m=listIR[id];if(m.autoT==null){var getFn=function(m){var fn=function(){autoShowOne(m);};return fn;};m.autoT=setInterval(getFn(m),4050);}}function StartPlayAll(event){for(var id in listIR){startAutoplay(id);}}function StartTouch(event){stopAutoplay(this._id);sTouch=event.touches[0].pageX;eTouch=sTouch;var m=listIR[this._id];startUl=parseInt(m.slidediv.style.left);}function EndTouch(event){var delta=eTouch-sTouch;if(delta==0)return;eTouch=sTouch;var dd=(delta>0?delta:-delta);if(dd>5){event.preventDefault ? event.preventDefault():(event.returnValue=false);}var id=this._id;var m=listIR[id];if(dd>m.divpics.offsetWidth*0.2){m.n=m.slideimgs[(delta>0?0:2)].iN;m.ncur=m.n;unselBtn(this._id);m.liBtn[m.n].className='current';SetCurDataCap(m);moveTo([[m.slidediv,{left:(delta>0?0:-2*m.divpics.offsetWidth)}]],100, function(){SetCurDataDiv(m);hideCaption(m,false);showCaption(m,true);});}else{moveTo([[m.slidediv,{left:startUl}]],100, function(){m.slidediv.style.display='none';});}startAutoplay(id);if(dd>5){event.stopPropagation();return false;}}function MoveTouch(event){event.preventDefault ? event.preventDefault():(event.returnValue=false);var x=event.touches[0].pageX;var m=listIR[this._id];m.slidediv.style.display='block';var d=x-sTouch;var md=(d>0?d:-d);if(md<m.divpics.offsetWidth){eTouch=x;m.slidediv.style.left=startUl+d+'px';}else{m.slidediv.style.left=(d>0?0:-2*m.divpics.offsetWidth)+'px';m.n=m.slideimgs[(d>0?0:2)].iN;m.ncur=m.n;unselBtn(this._id);m.liBtn[m.n].className='current';SetCurDataDiv(m);m.slidediv.style.display='block';eTouch=sTouch=x;}}function moveTo(pairs, speed, f){var oldpos=new Array;for(var i=0;i<pairs.length;i++){oldpos[i]=new Object;for(var n in pairs[i][1])oldpos[i][n]=parseInt(pairs[i][0].style[n]);}var tstart=new Date;if(!speed)speed=1000;var e=pairs[0][0];if(e.mtimer)clearInterval(e.mtimer);e.mtimer=setInterval(function(){var s=(new Date-tstart)/speed;if(s>1)s=1;var v=((-Math.cos(s*Math.PI)/2)+0.5);for(var i=0;i<pairs.length;i++){for(var n in pairs[i][1])pairs[i][0].style[n]=Math.floor((pairs[i][1][n]-oldpos[i][n])*v)+oldpos[i][n]+'px';}if(s==1){clearInterval(e.mtimer);if(f)f();}}, 0);};};function addEventListener(e, event, f){if(e.addEventListener)e.addEventListener(event, f, false);else e.attachEvent('on'+event, f);}function getElementsByClassName(b, tag, className){var tags=b.getElementsByTagName(tag);var ar=[];for(var i=0;i<tags.length;++i){var classes=tags[i].className.split(' ');for(var j=0;j<classes.length;++j){if(classes[j]==className){ar.push(tags[i]);break;}}}return ar;}function addOnReady(f,fu){var isReady=false,ready=function(){if(!isReady){isReady=true;f();};};if(d.addEventListener){d.addEventListener('DOMContentLoaded',ready,false);window.addEventListener('load',ready,false);}if(window.attachEvent)window.attachEvent('onload',ready);if(d.documentElement.doScroll&&window==top){(function(){if(!isReady){try{d.documentElement.doScroll('left');}catch(E){setTimeout(arguments.callee,0);return;}ready();}})()}}addOnReady(onLoad, onLoad);})();